File System
-------------

* 파일
  * 일반적으로 보조 기억 장치에 저장된다.
  * 운영체제는 다양한 저장 장치를 file이라는 동일한 논리적 단위로 볼 수 있게 한다.
  * 파일의 연산자
    * create, read, write, reposition(lseek), delete, close 등
    * reposition : 위치를 변경 및 저장하는 연산자
    * open : meta data를 메모리에 올리는 연산자
    * 모든 연산자는 시스템 콜이다.
  * 파일의 속성(메타 데이터)
    * 파일을 관리하기 위한 정보
      * 파일 이름, 유형, 저장된 위치, 파일 사이즈
      * 접근권한(읽기, 쓰기, 실행), 시간(생성, 변경, 사용), 소유자
  * 파일 시스템
    * 운영체제에서 파일을 관리하는 부분
    * 파일 및 파일의 메타 데이터, 디렉토리 정보 등을 관리
    * 파일의 저장 방법 결정
    * 파일 보호
  * open() 연산자
    * open("/a/b/c")
      * 디스크에서 파일 c의 메타 데이터를 메모리에 가져오는것이 목적
      * root 디렉토리에서 /를 open 하고 그 안에서 파일 위치 a를 찾는다.
      * 파일 a를 open 하고 read 하여 그 안에서 파일 b의 위치를 찾는다.
      * 파일 b를 open 하고 read 하여 그 안에서 파일 c의 위치를 찾는다.
      * 파일 c를 open 한다.
    * 디렉토리 경로 탐색에 너무 많은 시간이 소요됨으로 open을 read와 write와는 별도로 둔다.
    * 한번 open 파일은 read, write시 디렉토리 탐색이 필요없다.
    * Open file table
      * 현재 open 된 파일의 메타 데이터 보관소이다. 
      * 메타 데이터외에도 추가적인 정보가 있다.
        * open한 프로세의 수
        * file offset : 파일의 어느 위치를 접근중인지 표시
      * 파일 descriptor
        * 프로세스별 Open file table에 대한 위치 정보
    * open()의 동작 과정
      * 디스크에 있던 root의 메타 데이터가 메모리로 올라간다.
      * root의 주소를 찾아가고, root에 존재하는 a의 메타 데이터에 접근한다.
      * a의 메타 데이터를 메모리에 올린다. (Open file table)
      * a의 주소를 찾아가고, a에 존재하는 b의 메타 데이터에 접근한다.
      * b의 메타 데이터를 메모리에 올린다. (Open file table)
      * 프로세스가 open() 시스템 콜의 반환 값을 전달 받는다.
      * b의 메타 데이터가 위치하는 포인터 값 (file descriptor) ⇒ Open file table의 인덱스 값
      * read() 시스템 콜이 발생하면, fd 값을 이용하여 b의 컨텐츠를 읽고, 그 값을 디스크 상의 버퍼 캐시에 저장한다.
      * b의 컨텐츠를 커널 메모리 상의 버퍼 캐시에 저장한다.
      * b의 컨텐츨를 사용자 메모리 상의 버퍼 캐시에 접근한다.
      * file system에서는 LRU, LFU와 같은 알고리즘을 사용한 버퍼 캐싱이 가능하다. -> 시스템콜이 발생하기 때문
* 디렉토리와 논리적 디스크
  * 디렉토리
    * 파일의 메타 데이터 중 일부를 보관하고 있는 일종의 특별한 파일
    * 그 디렉토리에 속한 파일 이름 및 속성
    * 연산자
      * search for file, create a file, delete file
      * list a directory, rename a file, traverse the file system
  * 파티션
    * 하나의 물리적 디스크 안에 여러 파티션을 두는 것이 일반적이다.
    * 여러 개의 물리적인 디스크를 하나의 파티션으로 구성하기도 한다.
    * 물리적 디스크를 파티션으로 구성한 뒤 각각의 파티션에 파일 시스템을 깔거나 스와핑 등 다른 용도로 사용할 수 있다.
* 파일 보호
  * 각 파일에 대해 누구에게 어떤 유형의 접근을 허락할 것인지 정하는 것
  * Access Control Matrix
    * 행은 각 유저를, 열은 각 파일로 하여 행렬을 만들어 read, write, execution을 표시한다.
    * 각 유저와 파일마다 행렬을 추가해야 하기 때문에 자원의 소비가 많다.
  * Grouping
    * 전체 user를 owner, group, public의 세 그룹으로 나눈다.
    * 각 파일에 대해 세 그룹의 접근권한을 3비트씩 표시하여 총 9비트로 표현이 가능하다.
    * UNIX에서 사용하는 방식이다.
  * Password
    * 파일마다 비밀번호를 설정하는 방법
    * 접근 권한 별 패스워드에 대한 암기 문제, 관리 문제가 발생한다.
* 파일 시스템의 마운팅
  * 각각의 논리적인 디스크에는 파일 시스템을 설치하여 루트 파일 시스템 안에 있는 모든 파일은 접근 가능하다.
  * 다른 파티션에 있는 파일 시스템을 접근하고 싶다면 마운팅을 통해 접근이 가능하다. 
* 파일 정보의 접근 방식
  * 시스템이 제공하는 파일 정보의 접근 방식
    * 순차 접근
      * 카세트 테이프를 사용하는 방식처럼 접근한다.
      * 읽거나 쓰면 offset은 자동으로 증가한다.
    * 직접 접근
      * LP 레코드 판과 같이 접근한다.
      * 파일을 구성하는 레코드를 임의의 순서로 접근할 수 있다.